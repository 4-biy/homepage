<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base target="_top" />
    <meta charset="UTF-8" />
    <script src="https://cdn.tailwindcss.com"></script>
<script>
    // Array titik koordinat area yang diinginkan (diubah sesuai dengan area pada gambar)
    const polygonCoords = [
        { lat: -5.108425, lng: 119.432153 },
        { lat: -5.108556, lng: 119.432242 },
        { lat: -5.108386, lng: 119.432506 },
        { lat: -5.108244, lng: 119.432414 }
        // Tambahkan lebih banyak titik jika perlu untuk membentuk area yang tepat
    ];

    // Fungsi untuk memeriksa apakah titik berada di dalam poligon
    function isPointInPolygon(lat, lng, polygon) {
        let inside = false;
        for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {
            const xi = polygon[i].lat, yi = polygon[i].lng;
            const xj = polygon[j].lat, yj = polygon[j].lng;

            const intersect = ((yi > lng) != (yj > lng)) &&
                (lat < (xj - xi) * (lng - yi) / (yj - yi) + xi);
            if (intersect) inside = !inside;
        }
        return inside;
    }

    // Fungsi untuk mengambil lokasi dan memeriksa apakah dalam area poligon
    function checkLocationAndRedirect() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function (position) {
                const userLatitude = position.coords.latitude;
                const userLongitude = position.coords.longitude;

                // Periksa apakah pengguna berada di dalam area poligon
                const isInside = isPointInPolygon(userLatitude, userLongitude, polygonCoords);

                if (!isInside) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Anda berada di luar area yang ditentukan!',
                        text: 'Silakan kembali ke lokasi yang benar untuk melakukan absensi.',
                    });
                } else {
                    // Jika di dalam area, arahkan ke halaman absensi
                    window.location.href = "https://4-biy.github.io/iframe/iframe.html";
                }
            }, function (error) {
                Swal.fire({
                    icon: 'error',
                    title: 'Gagal mengambil lokasi',
                    text: error.message,
                });
            });
        } else {
            Swal.fire({
                icon: 'error',
                title: 'Geolocation tidak didukung',
                text: 'Perangkat Anda tidak mendukung geolocation.',
            });
        }
    }
</script>

    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://kit.fontawesome.com/26d8d3b5e2.js" crossorigin="anonymous"></script>
</head>

<body>
    <div id="content">
        <div class="w-full scroll-smooth bg-slate-100">
            <div class="mx-auto min-h-screen overflow-hidden">
                <div class="w-full max-xl:px-8 bg-indigo-300">
                    <div class="max-w-screen-xl flex justify-center items-center gap-12 max-md:gap-6 mx-auto">

                        <img class="h-32 w-32 max-md:w-16 max-md:h-16 max-sm:my-8" src="Logoooo.png" alt="" />

                        <div class="text-center">
                            <small
                                class="xl:text-2xl md:text-base font-semibold inline-block pt-8 max-xl:pt-8 sm:block max-sm:hidden">PT
                                Industri Kapal Indonesia (Persero)</small>
                            <h1
                                class="xl:text-4xl md:text-lg w-fit text-balance xl:leading-1 0 pt-2 max-xl:pt-0 pb-8 font-bold sm:block max-sm:hidden">
                                Catatan Elektronik Mahasiswa Magang dan PKL Aktif dengan Keandalan Analisis
                            </h1>
                        </div>
                        <img class="h-32 w-32 max-md:w-16 max-md:h-16 max-sm:my-8"
                            src="https://upload.wikimedia.org/wikipedia/commons/6/67/Coat_of_arms_of_South_Sulawesi.svg"
                            alt="" />
                    </div>
                </div>
                <div
                    class="hidden max-sm:flex flex-col h-[55vh] px-8 max-sm:shadow-lg max-sm:shadow-indigo-950 box-border pt-8">
                    <small class="text-lg font-light mb-3">PT Industri Kapal Indonesia (Persero)</small>
                    <h1 class="text-4xl w-fit text-balance leading-[1.3em] font-medium">
                        Catatan Elektronik Mahasiswa Magang dan PKL Aktif dengan KeandalanÂ Analisis
                    </h1>
                </div>
                <div class="max-sm:py-16 block mx-auto max-w-[1080px] px-8">
                    <h3 class="text-4xl mt-8 mb-12 font-bold text-center text-indigo-300 ">
                        Menu Aplikasi
                    </h3>
                    <ul class="flex flex-wrap justify-center items-center border-purple-400 gap-8">
                        <li>
                            <button onclick="checkLocationAndRedirect()"
                                class="flex flex-col duration-200 rounded-xl overflow-hidden justify-center items-center font-semibold gap-8 bg-indigo-300 hover:bg-indigo-200 hover:text-indigo-950 transition-all hover:scale-105 shadow-sm p-8 hover:border-2 hover:border-indigo-950"
                                type="button">
                                <p class="text-3xl text-center w-fit capitalize">Absensi</p>
                                <i class="fa-solid fa-user-check fa-9x"></i>
                            </button>
                        </li>
                        <li>
                            <button onclick="location.href='sertifikat.html'"
                                class="flex flex-col duration-200 rounded-xl overflow-hidden justify-center items-center font-semibold gap-8 bg-indigo-300 hover:bg-indigo-200 hover:text-indigo-950 transition-all hover:scale-105 shadow-sm p-8 hover:border-2 hover:border-indigo-950"
                                type="button">
                                <p class="text-3xl text-center w-fit capitalize">Sertifikat</p>
                                <i style="font-size: 150px;" class="fa-solid fa-file-circle-check fa-9x"></i>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
